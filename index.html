<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WaveForce</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #0a1c2e; color: #e0e0e0; text-align: center; padding: 20px; }
        input, button { padding: 10px; margin: 5px; }
        button { background: linear-gradient(45deg, #4b5ef9, #00d4ff); border: none; color: white; cursor: pointer; }
        #status { color: #ff4444; }
        .legal { border: 1px solid #444; padding: 10px; margin-top: 20px; }
    </style>
</head>
<body>
    <h1>WaveForce</h1>
    <p>Convert YouTube videos to high-quality WAV audio files</p>
    <div>
        <label>üé¨ YouTube URL</label>
        <input type="text" id="youtubeUrl" placeholder="Enter YouTube URL">
    </div>
    <div>
        <label>üìù Custom Filename (Optional)</label>
        <input type="text" id="filename" placeholder="Enter custom filename">
    </div>
    <div>
        <button onclick="convertToWav()">‚ö° Convert to WAV</button>
    </div>
    <p id="status">Processing...</p>
    <a id="downloadLink" style="display: none;">üì• Download WAV Transmission</a>

    <div class="legal">
        <h3>‚öñÔ∏è Legal Disclaimer & Terms of Use</h3>
        <p><strong>IMPORTANT LEGAL NOTICE</strong></p>
        <p>BY CLICKING "I AGREE" BELOW, YOU ACKNOWLEDGE AND AGREE TO THE FOLLOWING TERMS:</p>
        <ol>
            <li><strong>SOFTWARE PROVIDED "AS IS"</strong><br>This software (WaveForce) is provided "AS IS" without warranty of any kind.</li>
            <li><strong>NO LIABILITY</strong><br>The software creator shall not be liable for any claims or damages.</li>
            <li><strong>COPYRIGHT COMPLIANCE</strong><br>You are responsible for ensuring compliance with copyright laws and YouTube's terms.</li>
            <li><strong>PRIVATE USE ONLY</strong><br>Intended for personal, non-commercial use only.</li>
            <li><strong>INDEMNIFICATION</strong><br>You agree to indemnify the software creator against any claims.</li>
            <li><strong>NO ENDORSEMENT</strong><br>The creator does not endorse copyright infringement.</li>
            <li><strong>USER RESPONSIBILITY</strong><br>Use at your own risk.</li>
            <li><strong>JURISDICTION</strong><br>Governed by applicable law.</li>
        </ol>
        <p>BY PROCEEDING, YOU CONFIRM THAT YOU HAVE READ, UNDERSTOOD, AND AGREE TO BE BOUND BY THESE TERMS. IF YOU DO NOT AGREE, DO NOT USE THIS SOFTWARE.</p>
        <button onclick="acceptTerms()">I Agree</button>
        <button onclick="declineTerms()">I Decline</button>
    </div>

    <div>
        <p>üéØ Premium Quality: Convert to uncompressed WAV format with maximum audio fidelity.</p>
        <p>‚ö° Lightning Fast: Advanced algorithms ensure quick conversion.</p>
        <p>üõ°Ô∏è Rebel Alliance: Join the resistance against low-quality audio formats.</p>
    </div>

    <p>‚ö†Ô∏è Railway Version: This version runs on Railway with full yt-dlp and ffmpeg support. Videos up to 20 minutes and 100MB are supported. $5 monthly credit applies. Please ensure you have permission to download the content.</p>

    <script>
        let termsAccepted = false;
        function acceptTerms() { termsAccepted = true; document.querySelector('.legal').style.display = 'none'; }
        function declineTerms() { alert('You must agree to the terms to use WaveForce.'); }

        async function convertToWav() {
            if (!termsAccepted) {
                alert('Please agree to the terms before proceeding.');
                return;
            }

            const url = document.getElementById('youtubeUrl').value;
            const filename = document.getElementById('filename').value;
            const status = document.getElementById('status');
            const downloadLink = document.getElementById('downloadLink');

            if (!url) {
                status.textContent = 'Error: YouTube URL is required';
                return;
            }

            status.textContent = 'Converting...';
            downloadLink.style.display = 'none';

            try {
                const response = await fetch('/api/convert', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ url, filename })
                });

                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.error || 'Conversion failed');
                }

                const blob = await response.blob();
                const downloadUrl = window.URL.createObjectURL(blob);
                downloadLink.href = downloadUrl;
                downloadLink.download = filename || 'output.wav';
                downloadLink.style.display = 'block';
                status.textContent = 'Conversion complete! Click to download.';
            } catch (err) {
                status.textContent = `Error: ${err.message}`;
            }
        }
    </script>
</body>
</html>
